


<code-block>

      <template shadowrootmode=open>
      
            <style>
  :host
    {--bcol:lightblue}
    
  #root
    {height:100%;border-top:1px solid var(--bcol);padding-top:10px;border-bottom:1px solid var(--bcol);}
    
  code
    {display:block}
    
  editor-root
    {display:block;margin-bottom:5px;}
    
    
            </style>
            
            
            <div id=root>
            
                  <code></code>
            
            </div>
            
      </template>

      
      <script>

      
mod['code-block']   = function(){
  
  var obj   = {};
  
  
        var ext,$,code,menu,ace
        ;
        
        obj.initmod   = function(params){
          
              ext       = params.ext;
              $         = params.$;
              code      = params.code;
              menu      = params.menu;
              ace       = params.ace;
              
        }//initmod
        
        
  //:

  
        var snippet_console;
        obj.snippet_console   = null;

        
        var host;
        var root;
        
  
  //:
  
  
        obj.init    = async function(){
        }//init
        
        
  //:
  
  
        obj.initdom   = async function(rootnode){
          
              if($.nodename(rootnode)=='code-block'){
                    host                = rootnode;
              }else{
                    host                = $.$(rootnode,'code-block');
              }
              root                      = host.shadowRoot;
              
              var dom                   = host.__root;
console.log('host',host);
console.log(host.innerText);

              var node                  = $(root,'code');
              node.textContent          = dom.textContent;
              //code.editor.code(node,{menu});

              
              if(dom.hasAttribute('snippet-console')){
                    var src   = dom.getAttribute('src');
                    if(src){
                          node.setAttribute('src',src);
                    }
                    
                    snippet_console       = await code.snippet_console(root,{menu,ace});
                    obj.snippet_console   = snippet_console;
              }

          
        }//initdom
        
        
  //:
  
  
        
  return obj;
  
}//code-block


      </script>
      
</code-block>