


<html>

      <head>


      
            <script src='https://libs.ext-code.com/js/dom/component/component.js'></script>

            <script init>
                                                                                console.clear();
                                                                                console.log('filemod-test-v2.0.html');
                                                                                console.log();
                                                                                console.json=v=>console.log(JSON.stringify(v,null,4));
        var df=true,version='v2.0'
        ;
        
        var ext,$,datatype,menumod,keydown,debug
        ;
        
        var menu;
        
        var filemod;


  //:
  
  
        async function init(){
                                                                                debug('init',version);


              keydown.add(kd);
              
              menu                   = menumod();
              
              
              filemod   = mod['file-mod'];
              
              filemod.initmod({ext,$,menumod,menu,complete});

              await filemod.init();
              
              
              initdom(document.body);


        
        }//init
        

(async()=>{

        mod.stack.add;
        
        ({ext}    = await import('https://libs.ext-code.com/js/io/ext-loader/ext-loader.m.js'));
          
        var promise   = ext.load.libs(
              'js/dom/$.js',
              'js/core/datatype.js',
              'js/dom/menumod/menumod.js',
              'js/dom/keydown/keydown.js',
              'js/debug/debug.js',
        );
        [$,datatype,menumod,keydown,debug]   = await promise;
  
        mod.stack.complete;
              
})();
    
        
            </script>
      
            <style>
      
  html
    {height:100%}
  body
    {height:calc(100% - 16px);font-family:arial}
  
  .icon
    {width:30px;height:30px;border:1px solid gray;border-radius:3px;box-sizing:border-box;cursor:pointer;}
  button
    {padding:5px 10px;cursor:pointer;height:30px;font-size:16px}            
            
            </style>

      <head>

      
      <body>
      
            <div>
                  <file-mod component></file-mod>
            </div>
            
            <div>
                  <button id=test>test</button>
            </div>
      
      
<!--      
            <checkbox-one-template>
                  <script src='https://html-loader-dblv8aserliq.runkit.sh/?checkbox-one-template'></script>
            </checkbox-one-template>
-->            

      </body>

      <script>


        var complete    = {};
        
        
  //:
  
  
        function initdom(rootnode){
                                                                                debug('initdom');
              
              var root    = rootnode;
              
              
              filemod.initdom();


              
              
              $('#test').onclick    = e=>alert(filemod.autosave);
              
              
              
        }//initdom

        
  //:
  
  
        function kd(e){
        
              if(e.key==' ' && e.ctrlKey){
                    menumod.open();
              }
              
        }//kd
        

        function focus(){
        }//focus
        
        
  //:
  
  
        complete.load   = function(file,blob){
                                                                                console.log(file,blob);
        }//complete.load
        
        
        complete.save   = function(file){
                                                                                console.log(file);
        }//save

        
        function source(){
          
              var blob    = new Blob(['helloworld']);
              return blob;
              
        }//source
        
        
        
        
      </script>
      






      