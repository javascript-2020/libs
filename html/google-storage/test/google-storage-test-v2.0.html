

<html>

      <head>
      
            <style>

  html
    {font-family:arial}
  
  .icon
    {border:1px solid gray;border-radius:3px;box-sizing:border-box;width:32px;height:32px;cursor:pointer}
            
            </style>
      
      
            <script src='https://libs.ext-code.com/js/dom/component/component.js'></script>

            <script init>
            
                                                                                console.clear();
                                                                                console.log('google-storage-test.html');
                                                                                console.log();
                                                                                console.json=json=>console.log(JSON.stringify(json,null,4));
        var ext,$,datatype,menumod,keydown
        ;
        
        var menu;
        
        var googlestorage;
        var log;
        

  //:
  
  
        mod.stack.add   = init;
        
        async function init(){
        
        
              menu                          = menumod();
              
              
              googlestorage                 = mod['google-storage'];
              log                           = mod.log;

              
              googlestorage.initmod({ext,$,menu,source});
              googlestorage.load.complete   = complete.load;
              googlestorage.save.complete   = complete.save;
              log.initmod({ext,$});
              
              
              googlestorage.init();
              log.init();
              

          
              initdom(document.body);
              
          
        }//init
        

(async()=>{

        mod.stack.add;
        
        ({ext}    = await import('https://libs.ext-code.com/js/io/ext-loader/ext-loader.m.js'));
          
        var promise   = ext.load.libs(
              'js/dom/$.js.api',
              'js/core/datatype.js',
              'js/dom/menumod/menumod.js',
              'js/dom/keydown/keydown.js'
        );
        [$,datatype,menumod,keydown]   = await promise;
  
        mod.stack.complete;
              
})();

            
            </script init>
            
      </head>
      
      
      
      <body>
      
      
            <google-storage component v2.0></google-storage>
            <log component v2.0></log>
      
      
      </body>
      

      <script>
      

        var complete    = {};

        
  //:
  
  
        function initdom(rootnode){
          
              var root                  = rootnode;
              
              
              googlestorage.initdom(root);
              log.initdom();
              
              
        }//initdom
        
        
  //:
        
        
        complete.load   = async function(file,blob){
          
              var txt   = await blob.text();
              alert(txt);
              
        }//load
        
        
        complete.save   = function(file){
          
              alert(file.filename+' saved');
              
        }//save


  //:
  
  
        function source(){
          
              var blob    = new Blob(['helloworld']);
              return blob;
              
        }//source




        
      </script>
      
</html>



