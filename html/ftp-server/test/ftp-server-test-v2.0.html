


<html>

      <head>



            <script src='https://libs.ext-code.com/js/dom/component/component.js'></script>

            <script init>
                                                                                console.clear();
                                                                                console.log('https-file test');
                                                                                console.log();
                                                                                console.json=v=>console.log(JSON.stringify(v,null,4));
        var ext,$,datatype,menumod,keydown
        ;
        
        var menu;
        
        var ftpserver;
        var log;
        var con;

        
  //:
  
  
        async function init(){
                                                                                console.log('init');
              menu            = menumod();
              
              ftpserver       = mod['ftp-server'];
              log             = mod.log;
              con             = mod.console;
              
              
              ftpserver.initmod({ext,$,datatype,menu,log});
              log.initmod({ext,$});
              con.initmod({ext,$});
              
              ftpserver.load.complete   = complete.load;
              ftpserver.save.complete   = complete.save;
        
              await Promise.all([
                    ftpserver.init(),
                    log.init(),
                    con.init(),
              ]);
              
              
              initdom(document.body);
  
              
        }//init
  
  
(async()=>{

        mod.stack.add;
        
        ({ext}    = await import('https://libs.ext-code.com/js/io/ext-loader/ext-loader.m.js'));
          
        var promise   = ext.load.libs(
              'js/dom/$.js.api',
              'js/core/datatype.js',
              'js/dom/menumod/menumod.js',
              'js/dom/keydown/keydown.js'
        );
        [$,datatype,menumod,keydown]   = await promise;
  
        mod.stack.complete;
              
})();

      
            </script init>

            <style>

  body
    {margin:20px;display:flex;flex-direction:column;gap:20px}
    
  .icon 
    {border:1px solid gray;border-radius:3px;box-sizing:border-box;width:32px;height:32px;cursor:pointer}

            </style>

      </head>
      
      
      <body>

            <h3>
                  ftp-server v2.0 test
            </h3>
            
            
            <ftp-server component v2.0></ftp-server>

      
            <log component v2.0></log>

            <console component v2.0></console>
            
      </body>

      <script>


        var complete    = {};

        
  //:
  
  
        function initdom(rootnode){

              var root    = rootnode;

        
              ftpserver.initdom();
              
              log.initdom();
              
              con.initdom();


              con.log('ready');

              
        }//initdom


  //:
  
  
        complete.load   = function(file,txt){
        
              con.log('https-file-test : load');
              con.json(file);
              con.log(txt);
              
        }//load
        
        
        complete.save   = function(file,confirm=true){
          
              con.log('save '+file.filename);
              
        }//save
        

      </script>

</html>





