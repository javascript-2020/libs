

<html>

      <head>
      
            <script src='https://libs.ext-code.com/js/dom/component/v3.0/component.js?hdr'></script>
            
            <script init>
                                                                                console.log('db-files-v2.0-test.html');
                                                                                
        var dbfiles;
        
        
  //:
  
  
        async function init(){
                                                                                console.log('init');
              dbfiles                 = mod['db-files'];
              dbfiles.load.complete   = complete.load;
              dbfiles.save.complete   = complete.save;
              
              
              await mod.auto();
              
              
              initdom(document.body);
              
              
              
              return;
              
              
              var txt     = 'helloworld';
              var blob    = new Blob([txt]);
              await dbfiles.save('/test.txt',blob);
              
              
              
              var blob    = await dbfiles.load('/test.txt');
              var txt     = await blob.text();
              console.log(txt);
              //alert(txt);
              
              
              
        }//init
        
        
            </script>
            
            
            <style>
            
  html
    {font-family:arial}
    
  .icon
    {width:30px;height:30px;border:1px solid gray;cursor:pointer;border-radius:3px;box-sizing:border-box;}
    
  input
    {font-size:16px;padding:5px 10px}
  input[type=button]
    {cursor:pointer}
    
            </style>
            
      </head>
      
      
      <body>
      
      
            <db-files v2.0 component></db-files>
            
            
            <div style='margin-top:50px'>
                  <input value=test type=button>
            </div>
            
            <log-mod component></log-mod>
            
      </body>
      
      <script>
      
      
        var btn         = {};
        var complete    = {};
        
        
  //:
  
  
        function initdom(rootnode){
        
              var root    = rootnode;
              
              menu.add.style();
              
              $('[value=test]').onclick       = btn.test;
              
        }//initdom
        
        
        btn.test    = function(){
        
              var file    = dbfiles.newfile('/tst/','test.txt');
              var blob    = new Blob(['helloworld']);
              dbfiles.save(file,blob);
              
        }//test
        
        
  //:
  
  
        function source(){
        
                var blob    = new Blob(['123 xyz']);
                return blob;
                
        }//source
        
        
        complete.load   = async function(file,blob){
        
                console.log('load.complete');
                
                console.log(file);
                console.log(await blob.text());
                
        }//load
        
        
        complete.save   = function(file){
        
              console.log('save.complete');
              
              console.log(file);
              
        }//save
        
        
      </script>
      
</html>


