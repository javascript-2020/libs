


<html>

      <head>

            <title>console-test</title>

            <link rel=icon type='image/png' href='images/html-editor-favicon.png'>
            <link rel=stylesheet href='/utils/css/utils.css'>
            
            <script init>
                                                                                console.clear();
                                                                                console.json=v=>console.log(JSON.stringify(v,null,4));
        var version       = 'v1.0';
            
        var df            = true;


        var ext;
        var $;
        var datatype;

        
        var mod           = {};


        var store         = {};
        store.console     = window.console;
        
        
        var console;
        





  //:

              
        async function init(){



              await scripts();

              
              console                   = mod.console();
              log                       = mod.log();


              
              console.initmod({ext,$,ace,store});
              log.initmod({ext,$});
              
              
              await console.init();
              log.init();


          
              
              await initdom(document.body);




              init.complete();

              
        }//init


        init.stack            = [];
        init.stack.ct         = 0;
        init.stack.total      = 1;
        init.stack.mode       = '';
        init.stack.complete   = false;
        Object.defineProperty(init.stack,'add',{get:()=>{
              init.stack.total++;
              init.stack.mode && console[init.stack.mode]('add',init.stack.ct,init.stack.total);
        }});
        Object.defineProperty(init.stack,'complete',{get:()=>{
              init.stack.ct++;
              init.stack.mode && console[init.stack.mode]('complete',init.stack.ct,init.stack.total);
              init.stack.ct>=init.stack.total && init();
        }});
        
        //  (typeof init!='undefined' && init?.stack && init.stack.add)
        //  (typeof init!='undefined' && init?.stack && init.stack.complete)

        
        init.complete   = function(){
          
              init.complete.stack.forEach(fn=>fn());
              
        }//complete
        
        init.complete.stack   = [];
        init.complete.add     = fn=>init.complete.stack.push(fn);

                  

(async()=>{
  
        init.stack.add;
        
        var token   = localStorage['github-token'];
        var url;
        var headers;
        if(token){
              url       = 'https://api.github.com/repos/javascript-2020/ext-code/contents/ext-loader.js';
              headers   = {accept:'application/vnd.github.raw',authorization:`bearer ${token}`};
        }else{
              url       = 'https://raw.githubusercontent.com/javascript-2020/ext-code/main/ext-loader.js';
        }
        
        await fetch(url,{headers}).then(res=>res.text()).then(complete);

            
        async function complete(txt){

              ext           = eval(txt);
              var promise   = ext.load.libs(
                    'js/dom/$.js.api',
                    'js/core/datatype.js',
              );
              [$,datatype]   = await promise;

              init.stack.complete;

        }//ext_fn

})();


        function scripts(){
  
              var resolve,load    = new Promise(res=>resolve=res);
              
              var script      = document.createElement('script');
              script.src      = 'https://cdn.jsdelivr.net/npm/ace-builds@1.37.0/src-min-noconflict/ace.js';
              script.onload   = onload;
              document.head.append(script);
              
              return load;
              
              
              function onload(){
                
                    resolve();
                    
              }//onload
              
        }//scripts



            </script init>
            
      </head>

      
      <body>
      
            <style id=page-inline>


            </style>


            <console api>
                  <script html-loader src='https://html-loader-1024713184986.us-central1.run.app/'></script>
            </console>
      
            <log api>
                  <script html-loader src='https://html-loader-1024713184986.us-central1.run.app/'></script>
            </log>
      
      <script>
      


  //:
  
  
        function initdom(rootnode){

          
              root                                = rootnode;

              
              console.initdom(root);
              
              
              
              
        }//initdom
        
        
  //:
  
  
  
  init.stack.complete;
  
  
      </script>
      
      
      