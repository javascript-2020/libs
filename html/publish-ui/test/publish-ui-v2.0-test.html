



            <script src='https://libs.ext-code.com/js/dom/component/component.js'></script>

            <script init>
                                                                          console.clear();
                                                                          console.log('publish-ui-v2.0-test.html');
                                                                          console.log();
                                                                          console.json=v=>console.log(JSON.stringify(v,null,4));
            var ext,$,datatype,menumod,keydown;
            
            var menu;
            
            var publish;
            var log;


  //:
  
  
            async function init(){
                                                                          console.log('init');
                  keydown.add(kd);
                  
                  menu                      = menumod();


                  publish                   = mod['publish-ui'];
                  log                       = mod.log;
                  
                  publish.initmod({ext,$,menu,source,complete,log});
                  log.initmod({ext,$});
                  
                  
                  await Promise.all([
                        publish.init(),
                        log.init(),
                  ]);

                  
                  initdom(document.body);


            }//init
  

  //:
  
  
(async()=>{

        mod.stack.add;
        
        ({ext}    = await import('https://libs.ext-code.com/js/io/ext-loader/ext-loader.m.js'));
          
        var promise   = ext.load.libs(
              'js/dom/$.js.api',
              'js/core/datatype.js',
              'js/dom/menumod/menumod.js',
              'js/dom/keydown/keydown.js'
        );
        [$,datatype,menumod,keydown]   = await promise;
  
        mod.stack.complete;
              
})();

      
      </script init>
      


            <style>
            
  html
    {height:100%}
  body
    {height:calc(100% - 16px);font-family:arial}
  
  .icon
    {width:30px;height:30px;border:1px solid gray;border-radius:3px;box-sizing:border-box;cursor:pointer;}
  button
    {padding:5px 10px;cursor:pointer;height:30px;font-size:16px}            
            
            </style>
            
      </head>
      

      <body>
      
            <div>
            
                  <publish-ui component v2.0></publish>
                  
            </div>
            
            <div>
                  <button id=test>test</button>
            </div>


            <log component v2.0></log>


            
            <checkbox-one-template>
                  <script src='https://html-loader-1024713184986.us-central1.run.app/'></script>
            </checkbox-one-template>


            
      </body>


      <script initdom>

        
    //:
    
    
        function initdom(rootnode){

        
              publish.initdom();
              
              log.initdom();
              
              
              $('#test').onclick    = e=>{};
              
              
              
        }//initdom


  //:
  
  
        function kd(e){

              if(e.key==' ' && e.ctrlKey){
                    menumod.open();
              }
              
        }//kd
            

  //:
  
        
        function source(){
        
              var txt     = 'helloworld';
              var blob    = new Blob([txt]);
              return blob;
              
        }//source
        

        
        var complete    = {};
        
        
        complete.load   = function(file,blob){
                                                                                console.log(file,blob);
        }//load
        
        
        complete.save   = function(file){
                                                                                console.log(file);
        }//save


      </script>
      



      
